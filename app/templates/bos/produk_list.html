{% extends 'base.html' %}
{% load humanize %}
{% block title %}STOK PRODUK{% endblock %}
{% block content %}

<h5 class="text-muted">STOK PRODUK</h5>
<h2>Data Produk</h2>

<style> @media print { .no-print { display: none !important; } } </style>


<div class="d-flex justify-content-between align-items-center mb-3 no-print">
  <a href="{% url 'tambah_produk' %}" class="btn btn-primary">
    <i class="bi bi-plus-circle"></i> Tambah Produk
  </a>

  <form method="get" class="d-flex">
    <input type="text" name="q" class="form-control me-2" placeholder="Cari produk..." value="{{ request.GET.q }}">
    <button class="btn btn-outline-primary" type="submit">
      <i class="bi bi-search"></i> Cari
    </button>
  </form>
</div>

<!-- Tabel Produk -->
<table class="table table-bordered">
  <thead class="table-light">
    <tr>
      <th>Nama Produk</th>
      <th>Harga</th>
      <th>Stok</th>
      <th class="no-print">Aksi</th>
    </tr>
  </thead>
  <tbody>
    {% for p in produk %}
    <tr>
      <td>{{ p.nama }}</td>
      <td>Rp {{ p.harga|intcomma }}</td>
      <td>{{ p.stok }}</td>
      <td class="no-print">
        <a href="{% url 'edit_produk' p.id %}" class="btn btn-sm btn-warning">
          <i class="bi bi-pencil-square"></i> Edit
        </a>
        <form action="{% url 'delete_produk' p.id %}" method="post" class="d-inline">
          {% csrf_token %}
          <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Yakin ingin menghapus produk ini?')">
            <i class="bi bi-trash"></i> Hapus
          </button>
        </form>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="4" class="text-center text-muted">Tidak ada produk ditemukan.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<!-- Tombol Cetak -->
<div class="d-flex justify-content-end mt-3 no-print">
  <button class="btn btn-success" onclick="window.print()">
    <i class="bi bi-printer"></i> Cetak
  </button>
</div>

{% endblock %}
